
<%= flash[:notice] %>
<%= flash[:alert] %>
<h6>ショッピングカート</h6>
<%# ショッピングカートの右側の表示機能 %>
<%= link_to 'カートを空にする', destroy_all_path, method: :delete, "data-confirm" => "本当に削除しますか？", class: "btn btn-danger" %>

  <table border="5">
  <thead>
   <tr>
    <th>商品名</th>
    <th>単価（税込）</th>
    <th>数量</th>
    <th>小計</th>
   </tr>
  </thead>

  <tbody>
   <% @cart_items.each do |cart_item| %>
    <tr>
     <td>
      <%= image_tag cart_item.item.image, size:"50x50" %>
      <%= cart_item.item.name %>
     </td>

     <td><%= cart_item.item.with_tax_price.to_s(:delimited) %></td>
     <%= form_with model:[cart_item], url: cart_item_path(cart_item) do |f| %>

     <td><%#= f.select :amount, ['1個', 1], ['2個', 2], ['3個', 3], ['4個', 4], ['5個', 5], ['6個', 6], ['7個', 7], ['8個', 8], ['9個', 9]], {:prompt => "個数選択"}, :required => true %>
         <%= f.select :amount,(1..20).to_a, {:prompt => "個数選択"}, :required => true %>
         <%= f.submit "変更", class: "btn btn-success" %>
     </td>
   <% end %>
     <td><%= cart_item.sum_of_price.to_s(:delimited) %></td>
     <td><%= link_to '削除する', "/cart_items/#{cart_item.id}", method: :delete, "data-confirm" => "本当に削除しますか？", class: "btn btn-danger" %></td>
   <% end %>
    </tr>
   </tbody>
  </table>
<%# 単価（税込）合計金額の記載 %>
<h4>合計金額<%= @prices.to_s(:delimited) %>円</h4>

<%# ショッピングカート真ん中部分の表示機能 %>
<%= link_to '買い物を続ける', root_path, class: "btn btn-primary" %>

<% if @cart_items.present? %>
<%= link_to '情報入力に進む', new_order_path, class: "btn btn-success" %>
<% end %>

